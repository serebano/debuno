// debuno 0.1.31
import{b as y,c as v,d as L,e as R,l as x,m as h,p as b,q as N,s as w,t as m,v as p}from"./chunk-SWRUKNDJ.js";import O from"node:process";function S(l,t){let{onResolve:d,onLoad:M}=l,f=0;l.onResolve=(s,a)=>d(s,o=>{o={...o},s.namespace&&(o.namespace=s.namespace),t.before&&t.before("resolve",{args:o});let e=a(o,l);return f++,t.after&&e&&t.after("resolve",{index:f,specifier:(o.namespace!=="file"?o.namespace+":":"")+o.path,resolved:e,importer:o.importer}),e});let u=0;l.onLoad=(s,a)=>M(s,async o=>{o={...o},s.namespace&&(o.namespace=s.namespace),t.before&&t.before("load",{args:o});let e=await a(o,l);return u++,t.after&&t.after("load",{index:u,specifier:h(o).href,...e}),e})}var k=new Map;function B({generated:l}={}){return{name:"debuno-import-resolution",setup(t){S(t,{before(e,{args:n}){if(v)switch(e){case"resolve":m(e,n.namespace,n.path,n.importer);break;case"load":m(e,n.namespace,n.path);break}},after(e,n){if(!v)return;let r=`./preload.${e}.json`,c=y.readJSONFileSync(r,[]);switch(e){case"resolve":m(e,n),c.push(n);break;case"load":m(e,{...n,contents:""}),c.push({...n,contents:n?.contents?.toString()});break}y.writeJSONFileSync(`./preload.${e}.json`,c)}});let d=e=>e.startsWith(".")||e.startsWith("/"),M=new Map,f=p.nodeModulesDir,u=null;(f==="auto"||f==="manual")&&(u=L.join(p.options.cwd,"node_modules"));function s(e,n){k.has(e)||e==="bun"||(k.set(e,n),t.module(e,()=>({loader:"js",contents:`export * from "${n}"`})))}function a(e){if((e.importer==="bun:main"||e.importer===O.argv[1])&&e.importer==="bun:main"&&p.cacheSync(e.path),b(e)){if(w.has(e.path)||w.has("node:"+e.path))return{path:e.path,external:!0};if(u!==null)return}if(e.namespace==="file"&&N(e.importer))return x(new URL(e.path,e.importer));if(e.namespace==="file"&&d(e.path))try{let n=e.importer,r=n==="bun:main"?R(p.options.cwd).href:R(n).href,c=p.info(e.path,r);c.dependencies&&c.dependencies.filter(i=>!d(i.specifier)&&i.specifier!==i.code?.specifier&&i.specifier!==i.type?.specifier).map(i=>[i.specifier,i.code?.specifier||i.type?.specifier]).forEach(i=>s.apply(null,i))}catch(n){console.log("	map",e,n.message)}if(!(!e.namespace||e.namespace==="file"))try{let n=h(e),r=p.loader.resolve(n);switch(r.kind){case"npm":return{path:r.packageName};case"esm":return x(r.specifier);case"node":return{path:r.path,external:!0}}}catch(n){console.error("x10",n.message);return}}async function o(e,n){try{let r=h(e);return await p.loader.loadEsm(r,l)||null}catch(r){return console.error("x20",r.message),null}}t.onResolve({filter:/.*/,namespace:"jsr"},a),t.onResolve({filter:/.*/,namespace:"npm"},a),t.onResolve({filter:/.*/,namespace:"node"},a),t.onResolve({filter:/.*/,namespace:"file"},a),t.onLoad({filter:/.*/,namespace:"http"},o),t.onLoad({filter:/.*/,namespace:"https"},o)}}}function I(){Bun.plugin(B())}navigator.userAgent.includes("Bun")&&I();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vYnVuL3BsdWdpbi50cyIsICIuLi9idW4vcmVnaXN0ZXIudHMiLCAiLi4vYnVuL2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vbm9kZV9tb2R1bGVzL2J1bi10eXBlcy9pbmRleC5kLnRzXCIgLz5cbi8vIGRlbm8tbGludC1pZ25vcmUtZmlsZSBuby1leHBsaWNpdC1hbnlcblxuaW1wb3J0IHR5cGUgeyBCdW5QbHVnaW4sIFBsdWdpbkJ1aWxkZXIgfSBmcm9tIFwiYnVuXCI7XG5pbXBvcnQgYXBpLCB7IEJVSUxUSU5fTk9ERV9NT0RVTEVTLCBlc2J1aWxkUmVzb2x1dGlvblRvVVJMLCBpc0h0dHBPckh0dHBzLCBpc05vZGVNb2R1bGVzUmVzb2x1dGlvbiwgdXJsVG9Fc2J1aWxkUmVzb2x1dGlvbiwgZnMsIHBhdGgsIGxvZywgdXJsLCBpc0luTm9kZU1vZHVsZXMgfSBmcm9tIFwiLi4vc2hhcmVkL2FwaS50c1wiO1xuaW1wb3J0IHsgcGF0aFRvRmlsZVVSTCB9IGZyb20gXCIuLi9zaGFyZWQvdXJsLnRzXCI7XG5pbXBvcnQgcHJvY2VzcyBmcm9tIFwibm9kZTpwcm9jZXNzXCI7XG5pbXBvcnQgeyBERUJVRyB9IGZyb20gXCIuLi9zaGFyZWQvZGVidWcudHNcIjtcblxuXG5mdW5jdGlvbiBwYXRjaEJ1aWxkZXIoYnVpbGRlcjogUGx1Z2luQnVpbGRlciwgYXBpOiB7IGJlZm9yZTogKHR5cGU6ICdyZXNvbHZlJyB8ICdsb2FkJywgb2JqOiBhbnkpID0+IHZvaWQsIGFmdGVyOiAodHlwZTogJ3Jlc29sdmUnIHwgJ2xvYWQnLCBvYmo6IGFueSkgPT4gdm9pZCB9KSB7XG5cdGNvbnN0IHsgb25SZXNvbHZlLCBvbkxvYWQgfSA9IGJ1aWxkZXI7XG5cblx0bGV0IHJlc29sdmVJbmRleCA9IDBcblx0YnVpbGRlci5vblJlc29sdmUgPSAoY29uc3RyYWludHM6IGFueSwgY2FsbGJhY2s6IGFueSkgPT4gb25SZXNvbHZlKGNvbnN0cmFpbnRzLCAoYXJncykgPT4ge1xuXHRcdGFyZ3MgPSB7IC4uLmFyZ3MgfVxuXHRcdGlmIChjb25zdHJhaW50cy5uYW1lc3BhY2UpXG5cdFx0XHRhcmdzLm5hbWVzcGFjZSA9IGNvbnN0cmFpbnRzLm5hbWVzcGFjZVxuXG5cdFx0aWYgKGFwaS5iZWZvcmUpIGFwaS5iZWZvcmUoJ3Jlc29sdmUnLCB7IGFyZ3MgfSlcblx0XHRjb25zdCByZXN1bHQgPSBjYWxsYmFjayhhcmdzLCBidWlsZGVyKVxuXHRcdHJlc29sdmVJbmRleCsrXG5cdFx0aWYgKGFwaS5hZnRlciAmJiByZXN1bHQpIHtcblx0XHRcdGFwaS5hZnRlcigncmVzb2x2ZScsIHtcblx0XHRcdFx0aW5kZXg6IHJlc29sdmVJbmRleCxcblx0XHRcdFx0c3BlY2lmaWVyOiAoYXJncy5uYW1lc3BhY2UgIT09ICdmaWxlJyA/IGFyZ3MubmFtZXNwYWNlICsgXCI6XCIgOiBcIlwiKSArIGFyZ3MucGF0aCxcblx0XHRcdFx0cmVzb2x2ZWQ6IHJlc3VsdCwgLy9lc2J1aWxkUmVzb2x1dGlvblRvVVJMKHJlc3VsdCkuaHJlZixcblx0XHRcdFx0aW1wb3J0ZXI6IGFyZ3MuaW1wb3J0ZXJcblx0XHRcdH0pXG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHRcblx0fSk7XG5cblx0bGV0IGxvYWRJbmRleCA9IDBcblx0YnVpbGRlci5vbkxvYWQgPSAoY29uc3RyYWludHM6IGFueSwgY2FsbGJhY2s6IGFueSkgPT4gb25Mb2FkKGNvbnN0cmFpbnRzLCBhc3luYyAoYXJncykgPT4ge1xuXHRcdGFyZ3MgPSB7IC4uLmFyZ3MgfVxuXG5cdFx0aWYgKGNvbnN0cmFpbnRzLm5hbWVzcGFjZSlcblx0XHRcdGFyZ3MubmFtZXNwYWNlID0gY29uc3RyYWludHMubmFtZXNwYWNlXG5cblx0XHRpZiAoYXBpLmJlZm9yZSkgYXBpLmJlZm9yZSgnbG9hZCcsIHsgYXJncyB9KVxuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhbGxiYWNrKGFyZ3MsIGJ1aWxkZXIpXG5cdFx0bG9hZEluZGV4Kytcblx0XHRpZiAoYXBpLmFmdGVyKSB7XG5cdFx0XHRhcGkuYWZ0ZXIoJ2xvYWQnLCB7XG5cdFx0XHRcdGluZGV4OiBsb2FkSW5kZXgsXG5cdFx0XHRcdHNwZWNpZmllcjogZXNidWlsZFJlc29sdXRpb25Ub1VSTChhcmdzKS5ocmVmLFxuXHRcdFx0XHQuLi5yZXN1bHRcblx0XHRcdH0pXG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHRcblx0fSk7XG5cbn1cbmV4cG9ydCBjb25zdCBtb2R1bGVzTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwbHVnaW5JbXBvcnRSZXNvbHRpb24oeyBnZW5lcmF0ZWQgfTogeyBnZW5lcmF0ZWQ/OiBib29sZWFuIH0gPSB7fSk6IEJ1blBsdWdpbiB7XG5cdHJldHVybiB7XG5cdFx0bmFtZTogXCJkZWJ1bm8taW1wb3J0LXJlc29sdXRpb25cIixcblx0XHQvLyB0YXJnZXQ6IFwiYnVuXCIsXG5cdFx0c2V0dXAoYnVpbGRlcikge1xuXHRcdFx0Ly8gaWYgKERFQlVHKSB7XG5cdFx0XHQvLyBcdGNvbnNvbGUubG9nKCdwbHVnaW5JbXBvcnRSZXNvbHRpb24nLCB7IERFQlVHIH0pXG5cblx0XHRcdC8vIFx0ZnMud3JpdGVKU09ORmlsZVN5bmMoJy4vcHJlbG9hZC5qc29uJywgW10pXG5cdFx0XHQvLyBcdGZzLndyaXRlSlNPTkZpbGVTeW5jKCcuL3Jlc29sdmVkLmpzb24nLCB7fSlcblx0XHRcdC8vIFx0ZnMud3JpdGVKU09ORmlsZVN5bmMoYC4vcHJlbG9hZC5yZXNvbHZlLmpzb25gLCBbXSlcblx0XHRcdC8vIFx0ZnMud3JpdGVKU09ORmlsZVN5bmMoYC4vcHJlbG9hZC5sb2FkLmpzb25gLCBbXSlcblx0XHRcdC8vIH1cblxuXHRcdFx0cGF0Y2hCdWlsZGVyKGJ1aWxkZXIsIHtcblx0XHRcdFx0YmVmb3JlKHR5cGUsIHsgYXJncyB9KSB7XG5cdFx0XHRcdFx0aWYgKCFERUJVRykgcmV0dXJuXG5cdFx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlICdyZXNvbHZlJzpcblx0XHRcdFx0XHRcdFx0bG9nKHR5cGUsIGFyZ3MubmFtZXNwYWNlLCBhcmdzLnBhdGgsIGFyZ3MuaW1wb3J0ZXIpXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnbG9hZCc6XG5cdFx0XHRcdFx0XHRcdGxvZyh0eXBlLCBhcmdzLm5hbWVzcGFjZSwgYXJncy5wYXRoKVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFmdGVyKHR5cGUsIG9iaikge1xuXHRcdFx0XHRcdGlmICghREVCVUcpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBwYXRoID0gYC4vcHJlbG9hZC4ke3R5cGV9Lmpzb25gIGFzIGNvbnN0XG5cdFx0XHRcdFx0Y29uc3QganNvbiA9IGZzLnJlYWRKU09ORmlsZVN5bmMocGF0aCwgW10gYXMgYW55W10pXG5cdFx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0XHRjYXNlICdyZXNvbHZlJzoge1xuXHRcdFx0XHRcdFx0XHRsb2codHlwZSwgb2JqKVxuXHRcdFx0XHRcdFx0XHRqc29uLnB1c2gob2JqKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2xvYWQnOiB7XG5cdFx0XHRcdFx0XHRcdGxvZyh0eXBlLCB7IC4uLm9iaiwgY29udGVudHM6ICcnIH0pXG5cdFx0XHRcdFx0XHRcdGpzb24ucHVzaCh7IC4uLm9iaiwgY29udGVudHM6IG9iaj8uY29udGVudHM/LnRvU3RyaW5nKCkgfSkgLy8geyAuLi5vYmosIGNvbnRlbnRzOiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUob2JqLmNvbnRlbnRzKSB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRmcy53cml0ZUpTT05GaWxlU3luYyhgLi9wcmVsb2FkLiR7dHlwZX0uanNvbmAsIGpzb24pXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBpc1JlbE9yQWJzID0gKHBhdGg6IHN0cmluZykgPT4gcGF0aC5zdGFydHNXaXRoKCcuJykgfHwgcGF0aC5zdGFydHNXaXRoKCcvJylcblxuXHRcdFx0Y29uc3QgcGFja2FnZUlkQnlOb2RlTW9kdWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG5cdFx0XHRjb25zdCBub2RlTW9kdWxlc0Rpck9wdCA9IGFwaS5ub2RlTW9kdWxlc0RpclxuXHRcdFx0bGV0IG5vZGVNb2R1bGVzRGlyOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuXHRcdFx0aWYgKG5vZGVNb2R1bGVzRGlyT3B0ID09PSBcImF1dG9cIiB8fCBub2RlTW9kdWxlc0Rpck9wdCA9PT0gXCJtYW51YWxcIikge1xuXHRcdFx0XHRub2RlTW9kdWxlc0RpciA9IHBhdGguam9pbihhcGkub3B0aW9ucy5jd2QsIFwibm9kZV9tb2R1bGVzXCIpO1xuXHRcdFx0fVxuXG5cblx0XHRcdGZ1bmN0aW9uIG1hcE1vZHVsZShzcGVjaWZpZXI6IHN0cmluZywgcmVzb2x2ZWQ6IHN0cmluZykge1xuXHRcdFx0XHRpZiAobW9kdWxlc01hcC5oYXMoc3BlY2lmaWVyKSB8fCBzcGVjaWZpZXIgPT09ICdidW4nKVxuXHRcdFx0XHRcdHJldHVyblxuXG5cdFx0XHRcdG1vZHVsZXNNYXAuc2V0KHNwZWNpZmllciwgcmVzb2x2ZWQpXG5cblx0XHRcdFx0YnVpbGRlci5tb2R1bGUoc3BlY2lmaWVyLCAoKSA9PiAoe1xuXHRcdFx0XHRcdGxvYWRlcjogJ2pzJyxcblx0XHRcdFx0XHRjb250ZW50czogYGV4cG9ydCAqIGZyb20gXCIke3Jlc29sdmVkfVwiYFxuXHRcdFx0XHR9KSlcblx0XHRcdH1cblxuXHRcdFx0Ly8gcmVzb2x2ZVxuXHRcdFx0ZnVuY3Rpb24gcmVzb2x2ZShhcmdzOiB7XG5cdFx0XHRcdHBhdGg6IHN0cmluZyxcblx0XHRcdFx0bmFtZXNwYWNlOiBzdHJpbmcsXG5cdFx0XHRcdGltcG9ydGVyOiBzdHJpbmcsXG5cdFx0XHR9KSB7XG5cdFx0XHRcdC8vIHRocm93IG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeShhcmdzKSlcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ34gcmVzb2x2ZScsIGFyZ3MpXG5cdFx0XHRcdGlmIChhcmdzLmltcG9ydGVyID09PSAnYnVuOm1haW4nIHx8IGFyZ3MuaW1wb3J0ZXIgPT09IHByb2Nlc3MuYXJndlsxXSkge1xuXHRcdFx0XHRcdGlmIChhcmdzLmltcG9ydGVyID09PSAnYnVuOm1haW4nKSB7XG5cdFx0XHRcdFx0XHRhcGkuY2FjaGVTeW5jKGFyZ3MucGF0aClcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoaXNOb2RlTW9kdWxlc1Jlc29sdXRpb24oYXJncykpIHtcblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRCVUlMVElOX05PREVfTU9EVUxFUy5oYXMoYXJncy5wYXRoKSB8fFxuXHRcdFx0XHRcdFx0QlVJTFRJTl9OT0RFX01PRFVMRVMuaGFzKFwibm9kZTpcIiArIGFyZ3MucGF0aClcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHBhdGg6IGFyZ3MucGF0aCxcblx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWw6IHRydWUsXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChub2RlTW9kdWxlc0RpciAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoYXJncy5uYW1lc3BhY2UgPT09ICdmaWxlJyAmJiBpc0h0dHBPckh0dHBzKGFyZ3MuaW1wb3J0ZXIpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHVybFRvRXNidWlsZFJlc29sdXRpb24obmV3IFVSTChhcmdzLnBhdGgsIGFyZ3MuaW1wb3J0ZXIpKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGFyZ3MubmFtZXNwYWNlID09PSAnZmlsZScgJiYgaXNSZWxPckFicyhhcmdzLnBhdGgpKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IGltcG9ydGVyID0gYXJncy5pbXBvcnRlclxuXHRcdFx0XHRcdFx0Y29uc3QgcmVmZXJyZXIgPSBpbXBvcnRlciA9PT0gJ2J1bjptYWluJ1xuXHRcdFx0XHRcdFx0XHQ/IHBhdGhUb0ZpbGVVUkwoYXBpLm9wdGlvbnMuY3dkKS5ocmVmXG5cdFx0XHRcdFx0XHRcdDogcGF0aFRvRmlsZVVSTChpbXBvcnRlcikuaHJlZlxuXG5cdFx0XHRcdFx0XHRjb25zdCBpbmZvID0gYXBpLmluZm8oYXJncy5wYXRoLCByZWZlcnJlcilcblxuXHRcdFx0XHRcdFx0aWYgKGluZm8uZGVwZW5kZW5jaWVzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1hcCA9IGluZm8uZGVwZW5kZW5jaWVzXG5cdFx0XHRcdFx0XHRcdFx0LmZpbHRlcihpID0+ICFpc1JlbE9yQWJzKGkuc3BlY2lmaWVyKSAmJiAoaS5zcGVjaWZpZXIgIT09IGkuY29kZT8uc3BlY2lmaWVyKSAmJiBpLnNwZWNpZmllciAhPT0gaS50eXBlPy5zcGVjaWZpZXIpXG5cdFx0XHRcdFx0XHRcdFx0Lm1hcChpID0+IFtpLnNwZWNpZmllciwgaS5jb2RlPy5zcGVjaWZpZXIgfHwgaS50eXBlPy5zcGVjaWZpZXJdKVxuXG5cdFx0XHRcdFx0XHRcdG1hcC5mb3JFYWNoKChpOiBhbnkpID0+IG1hcE1vZHVsZS5hcHBseShudWxsLCBpKSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChlOiBhbnkpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdcdG1hcCcsIGFyZ3MsIGUubWVzc2FnZSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIWFyZ3MubmFtZXNwYWNlIHx8IGFyZ3MubmFtZXNwYWNlID09PSAnZmlsZScpIHtcblx0XHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IHNwZWNpZmllciA9IGVzYnVpbGRSZXNvbHV0aW9uVG9VUkwoYXJncyk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzb2x2ZWQgPSBhcGkubG9hZGVyLnJlc29sdmUoc3BlY2lmaWVyKTtcblxuXHRcdFx0XHRcdHN3aXRjaCAocmVzb2x2ZWQua2luZCkge1xuXHRcdFx0XHRcdFx0Y2FzZSBcIm5wbVwiOiB7XG5cdFx0XHRcdFx0XHRcdC8vIGxldCByZXNvbHZlRGlyOiBzdHJpbmc7XG5cdFx0XHRcdFx0XHRcdC8vIGlmIChub2RlTW9kdWxlc0RpciAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0XHQvLyBcdHJlc29sdmVEaXIgPSBub2RlTW9kdWxlc0Rpcjtcblx0XHRcdFx0XHRcdFx0Ly8gfSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gXHRyZXNvbHZlRGlyID0gYXBpLmxvYWRlci5ub2RlTW9kdWxlc0RpckZvclBhY2thZ2UocmVzb2x2ZWQucGFja2FnZUlkKTtcblx0XHRcdFx0XHRcdFx0Ly8gXHRwYWNrYWdlSWRCeU5vZGVNb2R1bGVzLnNldChyZXNvbHZlRGlyLCByZXNvbHZlZC5wYWNrYWdlSWQpO1xuXHRcdFx0XHRcdFx0XHQvLyB9XG5cdFx0XHRcdFx0XHRcdC8vIGNvbnN0IHBhdGggPSBgJHtyZXNvbHZlZC5wYWNrYWdlTmFtZX0ke3Jlc29sdmVkLnBhdGggPz8gXCJcIn1gO1xuXHRcdFx0XHRcdFx0XHQvLyBjb25zdCByZXNvbHZlZFBhdGggPSAoQnVuLnJlc29sdmVTeW5jKHBhdGgsIHJlc29sdmVEaXIpKVxuXHRcdFx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIlJSXCIsIHsgcGF0aCwgcmVzb2x2ZWRQYXRoIH0pXG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0cGF0aDogcmVzb2x2ZWQucGFja2FnZU5hbWVcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdC8vIFx0cGF0aDogcmVzb2x2ZWRQYXRoLFxuXHRcdFx0XHRcdFx0XHQvLyBcdG5hbWVzcGFjZTogJ2ZpbGUnLFxuXHRcdFx0XHRcdFx0XHQvLyBcdGV4dGVybmFsOiB0cnVlXG5cdFx0XHRcdFx0XHRcdC8vIH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNhc2UgXCJlc21cIjoge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdXJsVG9Fc2J1aWxkUmVzb2x1dGlvbihyZXNvbHZlZC5zcGVjaWZpZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y2FzZSBcIm5vZGVcIjoge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdHBhdGg6IHJlc29sdmVkLnBhdGgsXG5cdFx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWw6IHRydWUsXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlOiBhbnkpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCd4MTAnLCBlLm1lc3NhZ2UpXG5cdFx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGFzeW5jIGZ1bmN0aW9uIGxvYWQoYXJnczogeyBuYW1lc3BhY2U6IHN0cmluZywgcGF0aDogc3RyaW5nIH0sIF9idWlsZGVyOiBQbHVnaW5CdWlsZGVyKSB7XG5cdFx0XHRcdC8vIGlmIChhcmdzLm5hbWVzcGFjZSA9PT0gXCJmaWxlXCIgJiYgaXNJbk5vZGVNb2R1bGVzKGFyZ3MucGF0aCkpIHtcblx0XHRcdFx0Ly8gXHRyZXR1cm4ge1xuXHRcdFx0XHQvLyBcdFx0Y29udGVudHM6IGF3YWl0IGZzLnJlYWRGaWxlKGFyZ3MucGF0aCksXG5cdFx0XHRcdC8vIFx0XHRsb2FkZXI6IFwianNcIlxuXHRcdFx0XHQvLyBcdH07XG5cdFx0XHRcdC8vIH1cblxuXHRcdFx0XHQvLyBpZiAoYXJncy5uYW1lc3BhY2UgPT09ICdmaWxlJykge1xuXHRcdFx0XHQvLyBcdGNvbnN0IGNvbnRlbnRzID0gcmVwbGFjZUltcG9ydHMoYXdhaXQgZnMucmVhZFRleHRGaWxlKGFyZ3MucGF0aCkpXG5cdFx0XHRcdC8vIFx0Ly8gY29uc29sZS5sb2coJ1xcblxcbicsIGFyZ3MucGF0aCwgJ1xcblxcbicsIGNvbnRlbnRzLCAnXFxuXFxuJylcblx0XHRcdFx0Ly8gXHRyZXR1cm4ge1xuXHRcdFx0XHQvLyBcdFx0Y29udGVudHMsXG5cdFx0XHRcdC8vIFx0XHRsb2FkZXI6ICd0c3gnLFxuXG5cdFx0XHRcdC8vIFx0fVxuXHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBzcGVjaWZpZXIgPSBlc2J1aWxkUmVzb2x1dGlvblRvVVJMKGFyZ3MpO1xuXHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5sb2FkZXIubG9hZEVzbShzcGVjaWZpZXIsIGdlbmVyYXRlZCk7XG5cblx0XHRcdFx0XHQvLyBpZiAocmVzdWx0Py5sb2FkZXIgPT09ICd0c3gnICYmIGFyZ3MubmFtZXNwYWNlID09PSAnZmlsZXMnKSB7XG5cdFx0XHRcdFx0Ly8gXHRjb25zdCBjb250ZW50cyA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShyZXN1bHQuY29udGVudHMgYXMgQnVmZmVyU291cmNlKVxuXHRcdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ3JlcGxhY2VJbXBvcnRzJywgYXJncy5wYXRoKVxuXHRcdFx0XHRcdC8vIFx0cmV0dXJuIHtcblx0XHRcdFx0XHQvLyBcdFx0Y29udGVudHM6IHJlcGxhY2VJbXBvcnRzKGNvbnRlbnRzKSxcblx0XHRcdFx0XHQvLyBcdFx0bG9hZGVyOiAndHN4J1xuXHRcdFx0XHRcdC8vIFx0fVxuXHRcdFx0XHRcdC8vIH1cblxuXHRcdFx0XHRcdHJldHVybiByZXN1bHQgfHwgbnVsbFxuXHRcdFx0XHR9IGNhdGNoIChlOiBhbnkpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCd4MjAnLCBlLm1lc3NhZ2UpXG5cdFx0XHRcdFx0cmV0dXJuIG51bGxcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyByZXNvbHZlXG5cdFx0XHRidWlsZGVyLm9uUmVzb2x2ZSh7IGZpbHRlcjogLy4qLywgbmFtZXNwYWNlOiAnanNyJyB9LCByZXNvbHZlKTtcblx0XHRcdGJ1aWxkZXIub25SZXNvbHZlKHsgZmlsdGVyOiAvLiovLCBuYW1lc3BhY2U6ICducG0nIH0sIHJlc29sdmUpO1xuXHRcdFx0YnVpbGRlci5vblJlc29sdmUoeyBmaWx0ZXI6IC8uKi8sIG5hbWVzcGFjZTogJ25vZGUnIH0sIHJlc29sdmUpO1xuXHRcdFx0YnVpbGRlci5vblJlc29sdmUoeyBmaWx0ZXI6IC8uKi8sIG5hbWVzcGFjZTogJ2ZpbGUnIH0sIHJlc29sdmUpO1xuXHRcdFx0Ly8gYnVpbGRlci5vblJlc29sdmUoeyBmaWx0ZXI6IC8uKi8gfSwgcmVzb2x2ZSk7XG5cblxuXHRcdFx0Ly8gbG9hZFxuXHRcdFx0YnVpbGRlci5vbkxvYWQoeyBmaWx0ZXI6IC8uKi8sIG5hbWVzcGFjZTogJ2h0dHAnIH0sIGxvYWQgYXMgYW55KTtcblx0XHRcdGJ1aWxkZXIub25Mb2FkKHsgZmlsdGVyOiAvLiovLCBuYW1lc3BhY2U6ICdodHRwcycgfSwgbG9hZCBhcyBhbnkpO1xuXHRcdFx0Ly8gYnVpbGRlci5vbkxvYWQoeyBmaWx0ZXI6IC8uKi8sIG5hbWVzcGFjZTogJ25wbScgfSwgbG9hZCBhcyBhbnkpO1xuXG5cdFx0fSxcblx0fVxufVxuIiwgImltcG9ydCBwbHVnaW4gZnJvbSBcIi4vcGx1Z2luLnRzXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKCkge1xuICAgIEJ1bi5wbHVnaW4ocGx1Z2luKCkpXG59IiwgImltcG9ydCB7IHJlZ2lzdGVyIH0gZnJvbSBcIi4vcmVnaXN0ZXIudHNcIlxuXG5pZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIkJ1blwiKSkge1xuICAgIC8vIGNvbnNvbGUubG9nKCdSRUdJU1RFUicpXG4gICAgcmVnaXN0ZXIoKVxufSJdLAogICJtYXBwaW5ncyI6ICI7OEdBTUEsT0FBT0EsTUFBYSxlQUlwQixTQUFTQyxFQUFhQyxFQUF3QkMsRUFBb0gsQ0FDakssR0FBTSxDQUFFLFVBQUFDLEVBQVcsT0FBQUMsQ0FBTyxFQUFJSCxFQUUxQkksRUFBZSxFQUNuQkosRUFBUSxVQUFZLENBQUNLLEVBQWtCQyxJQUFrQkosRUFBVUcsRUFBY0UsR0FBUyxDQUN6RkEsRUFBTyxDQUFFLEdBQUdBLENBQUssRUFDYkYsRUFBWSxZQUNmRSxFQUFLLFVBQVlGLEVBQVksV0FFMUJKLEVBQUksUUFBUUEsRUFBSSxPQUFPLFVBQVcsQ0FBRSxLQUFBTSxDQUFLLENBQUMsRUFDOUMsSUFBTUMsRUFBU0YsRUFBU0MsRUFBTVAsQ0FBTyxFQUNyQyxPQUFBSSxJQUNJSCxFQUFJLE9BQVNPLEdBQ2hCUCxFQUFJLE1BQU0sVUFBVyxDQUNwQixNQUFPRyxFQUNQLFdBQVlHLEVBQUssWUFBYyxPQUFTQSxFQUFLLFVBQVksSUFBTSxJQUFNQSxFQUFLLEtBQzFFLFNBQVVDLEVBQ1YsU0FBVUQsRUFBSyxRQUNoQixDQUFDLEVBRUtDLENBQ1IsQ0FBQyxFQUVELElBQUlDLEVBQVksRUFDaEJULEVBQVEsT0FBUyxDQUFDSyxFQUFrQkMsSUFBa0JILEVBQU9FLEVBQWEsTUFBT0UsR0FBUyxDQUN6RkEsRUFBTyxDQUFFLEdBQUdBLENBQUssRUFFYkYsRUFBWSxZQUNmRSxFQUFLLFVBQVlGLEVBQVksV0FFMUJKLEVBQUksUUFBUUEsRUFBSSxPQUFPLE9BQVEsQ0FBRSxLQUFBTSxDQUFLLENBQUMsRUFDM0MsSUFBTUMsRUFBUyxNQUFNRixFQUFTQyxFQUFNUCxDQUFPLEVBQzNDLE9BQUFTLElBQ0lSLEVBQUksT0FDUEEsRUFBSSxNQUFNLE9BQVEsQ0FDakIsTUFBT1EsRUFD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QUM5RDlCLEVBQVEsVUFBVSxDQUFFLE9BQVEsS0FBTSxVQUFXLE1BQU8sRUFBRzhCLENBQU8sRUFLOUQ5QixFQUFRLE9BQU8sQ0FBRSxPQUFRLEtBQU0sVUFBVyxNQUFPLEVBQUd5QyxDQUFXLEVBQy9EekMsRUFBUSxPQUFPLENBQUUsT0FBUSxLQUFNLFVBQVcsT0FBUSxFQUFHeUMsQ0FBVyxDQUdqRSxDQUNELENBQ0QsQ0N2Uk8sU0FBU0UsR0FBVyxDQUN2QixJQUFJLE9BQU9DLEVBQU8sQ0FBQyxDQUN2QixDQ0ZJLFVBQVUsVUFBVSxTQUFTLEtBQUssR0FFbENDLEVBQVMiLAogICJuYW1lcyI6IFsicHJvY2VzcyIsICJwYXRjaEJ1aWxkZXIiLCAiYnVpbGRlciIsICJhcGkiLCAib25SZXNvbHZlIiwgIm9uTG9hZCIsICJyZXNvbHZlSW5kZXgiLCAiY29uc3RyYWludHMiLCAiY2FsbGJhY2siLCAiYXJncyIsICJyZXN1bHQiLCAibG9hZEluZGV4IiwgImVzYnVpbGRSZXNvbHV0aW9uVG9VUkwiLCAibW9kdWxlc01hcCIsICJwbHVnaW5JbXBvcnRSZXNvbHRpb24iLCAiZ2VuZXJhdGVkIiwgInR5cGUiLCAiREVCVUciLCAibG9nIiwgIm9iaiIsICJwYXRoIiwgImpzb24iLCAiZnNfZXhwb3J0cyIsICJpc1JlbE9yQWJzIiwgInBhY2thZ2VJZEJ5Tm9kZU1vZHVsZXMiLCAibm9kZU1vZHVsZXNEaXJPcHQiLCAiYXBpX2RlZmF1bHQiLCAibm9kZU1vZHVsZXNEaXIiLCAicGF0aF9leHBvcnRzIiwgIm1hcE1vZHVsZSIsICJzcGVjaWZpZXIiLCAicmVzb2x2ZWQiLCAicmVzb2x2ZSIsICJwcm9jZXNzIiwgImlzTm9kZU1vZHVsZXNSZXNvbHV0aW9uIiwgIkJVSUxUSU5fTk9ERV9NT0RVTEVTIiwgImlzSHR0cE9ySHR0cHMiLCAidXJsVG9Fc2J1aWxkUmVzb2x1dGlvbiIsICJpbXBvcnRlciIsICJyZWZlcnJlciIsICJwYXRoVG9GaWxlVVJMIiwgImluZm8iLCAiZSIsICJsb2FkIiwgIl9idWlsZGVyIiwgInJlZ2lzdGVyIiwgInBsdWdpbkltcG9ydFJlc29sdGlvbiIsICJyZWdpc3RlciJdCn0K
